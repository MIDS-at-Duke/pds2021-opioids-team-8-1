;;function relatedArticlesWidgetCallback(n){var t=0,s={};this.initialize=function(e){var t=n.params.rows;e.ssrShorNameJournalId=JSON.parse(e.ssrShorNameJournalId),0<e.rowsNumber?t=e.rowsNumber:e.rowsNumber=t,n.params.rows=2*t+1,n.params.showConsoleLog=e.debugMode,n.params.displayElementId=e.relatedArticlesId,n.params.returnFields.push("PublicationDate"),n.params.returnFields.push("AssetProduct");var r=[];for(var i in e.ssrShorNameJournalId){var s=i,l=e.ssrShorNameJournalId[i];null!=l&&""!==l&&(s+=":"+l.Item2),r.push(s)}var a=r.join();return""!==a&&(n.params.searchCollection=a,!0)},this.showLoader=function(e){document.querySelector("#"+e.relatedArticlesId+".related-articles-widget #related-articles-widget-loader").classList.toggle("hidden")},this.showRelatedArticlesMessage=function(e){e.showRelatedArticlesMessage&&(document.querySelector("#"+e.relatedArticlesId+".related-articles-widget #related-articles-widget-list").classList.toggle("hidden"),document.querySelector("#"+e.relatedArticlesId+".related-articles-widget #related-articles-widget-button").classList.toggle("hidden"),document.querySelector("#"+e.relatedArticlesId+".related-articles-widget #related-articles-widget-message").classList.toggle("hidden"))},this.generateQueryString=function(){for(var e="",t=document.querySelectorAll(n.params.querySelector),r=0;r<t.length;r++){e+=" "+(t[r].innerText||t[r].textContent||t[r].content||"").split("|")[0].split(" - ")[0].replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g," ").trim()}return e.trim()},this.loadWidget=function(){if(!(t>=relatedArticlesWidgetParamsArray.length))if(s=relatedArticlesWidgetParamsArray[t++],initialize(s)){s.queryString=generateQueryString(n),""!==s.queryString&&showLoader(s);var e={};e.queryString=s.queryString,s.filterQueries&&(e.filterQueries=JSON.parse(s.filterQueries)),n.loadWidget(e)}else loadWidget(this,relatedArticlesWidgetParamsArray,n)},n.preRender=function(e){if(e.Documents&&0!==e.Documents.length){e.Documents.splice(0,1),e.SearchPath=s.searchPath+s.queryString,e.RelatedArticlesId=s.relatedArticlesId;for(var t=0;t<e.Documents.length;t++){if(e.Documents[t].RelatedArticleImageUrl=s.imageHandlerUrl+"/"+e.Documents[t].AccessionNumber+".jpg",e.Documents[t].SubTitle&&0<e.Documents[t].SubTitle.length){var r=e.Documents[t].Title.concat(e.Documents[t].SubTitle);e.Documents[t].Title=[r.join(": ")]}e.Documents[t].PublicationTitle[0]=e.Documents[t].PublicationTitle[0].toUpperCase(),e.Documents[t].RelatedArticleDisplayClass=t>=s.rowsNumber?"hidden":"",e.Documents[t].RelatedArticlesJournalId=s.ssrShorNameJournalId[e.Documents[t].AssetProduct[0].toLowerCase()].Item1,e.Documents[t].DOI=e.Documents[t].DOI||e.Documents[t].AccessionNumber;var i=new Date(e.Documents[t].PublicationDate);e.Documents[t].PublicationDateMonthYear=i.toLocaleDateString("en-US",{month:"long",year:"numeric"})}}else s.showRelatedArticlesMessage=!0},n.postRender=function(e){showRelatedArticlesMessage(s),loadWidget()},relatedArticlesWidgetParamsArray&&loadWidget()}function relatedArticlesWidgetButtonClick(e,t,r){var i=document.querySelectorAll("#"+t+".related-articles-widget ul li.hidden");if(0<i.length){for(var s=0;s<i.length;s++)i[s].classList.toggle("hidden");e.innerHTML="View all related articles"}else window.location.href=window.location.origin+"/"+r}function relatedArticlesWidgetTitleClick(e){if(e&&"function"==typeof DualAccess){var t=new DualAccess;t.SendCounterDataRequestByAn(t.EventTypes.Investigation,t.ContentTypes.RelatedArticle,e)}}