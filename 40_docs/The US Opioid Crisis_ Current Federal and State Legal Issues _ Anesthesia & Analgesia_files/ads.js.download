/*! For license information please see ads.js.LICENSE.txt */
(self.webpackChunkoaks_journals_core=self.webpackChunkoaks_journals_core||[]).push([[695],{97682:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.JQueryDOMSelector=function(e){var t=window.jQuery,n=[];return t&&e&&(n=t(e).toArray()),n}},21665:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(88990),a=n(25547),r=n(27668),d=n(25865),l=n(31013),s=function(){var e=this;this.adConfig={};var t=0,n=[],s={},u="ej-advertisement-title";this.configure=function(t){e.adConfig=t};var f=function(e){var t=document.getElementById(e.id);if(!t)return null;if(e.outOfPage)t=c.defineOutOfPageSlot(e.adPath,e.id).addService(c.pubads());else try{t=c.defineSlot(e.adPath,[],e.id).defineSizeMapping(e.sizeMap).addService(c.pubads())}catch(e){c.pubads().refresh()}return t},g=function(e){if(e){var t=document.getElementById(e.id);if(t.setAttribute("id",""),e.displaySlug){var n=document.createElement("div");n.classList.add(u),t.appendChild(n)}var i=document.createElement("div");i.setAttribute("id",e.id),t.appendChild(i),i.classList.add("ad-placeholder")}};this.setPageTargeting=function(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;n++)c.pubads().setTargeting(t[n],e[t[n]])};var v=function e(n){t<=0?window.removeEventListener("scroll",e):p()},p=function(){for(var o=function(i){var o=s[n[i]],a=document.getElementById(o.id);if(!a)return{v:void 0};!1===o.refreshed&&(!1===e.adConfig.lazyLoadingEnabled||o.autoLoad||(0,l.isElementInViewport)(a))&&c.cmd.push((function(){(0,r.setSlotTargeting)(o.slot,o.slotTargeting),c.display(o.id),e.adConfig.lazyLoadingEnabled&&c.pubads().refresh([o.slot]),o.refreshed=!0,t--}))},a=0;a<n.length;a++){var d=o(a);if("object"===(void 0===d?"undefined":i(d)))return d.v}};this.displayAds=function(){window.bodyAdsConfiguration&&(0,d.insertAdSlotsInContent)(window.bodyAdsConfiguration),(0,a.getSlots)(s,n,e.adConfig.slotClass),c.cmd.push((function(){!function(){for(var e=Object.keys(s),n=0;n<e.length;n++){var i=s[e[n]];g(i),i.slot=f(i),i.slot&&!1===i.refreshed&&t++}}(),e.setPageTargeting(e.adConfig.pageTargeting),c.pubads().collapseEmptyDivs(),e.adConfig.lazyLoadingEnabled&&c.pubads().disableInitialLoad(),c.enableServices(),p(),c.pubads().addEventListener("slotOnload",(function(t){var n=t.slot.getSlotElementId(),i=s[n],a=document.getElementById(i.id),r=e.adConfig.topBanner.stickyDuration;i&&i.displaySlug&&!1===i.outOfPage&&(0,l.insertAdTitle)(a,u,e.adConfig.adTitle),i&&!0===i.sticky&&a&&(0,o.stickAds)(a,r)}))})),window.addEventListener("scroll",v)}},c=window.googletag||{};c.cmd=c.cmd||[],window.adService=new s,t.default=s},25865:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.insertAdSlotsInContent=void 0;var i=n(97682),o=function(e,t){var n=[],o=e.split(",");for(var a in o){var r=(0,i.JQueryDOMSelector)(o[a]);n=n.concat(r)}if(!n||!n.length||t<=0)return null;var d=[],l=(n=n.filter((function(e,t){return n.indexOf(e)===t}))).length/t;if(l<=1)d=n;else if(l>1&&l<=2)d=n.slice(0,t);else if(l>2)for(var s=Math.floor(l),c=n.length-Math.floor(n.length/s)*s-1,u=0;u<n.length;u++){(u<c-1||(u-c)%s==0)&&d.push(n[u])}return d},a=function(e){var t=document.createElement("div"),n=document.createElement("div"),i=Object.keys(e),o=function(e,t,n){e.setAttribute(t,n)};o(t,"class","ej-advertisement-content");for(var a=0;a<i.length;a++){var r=i[a];o(n,r,e[r])}return t.appendChild(n),t};t.insertAdSlotsInContent=function(e){if(e&&e.length)for(var t in e){var n=e[t],i=o(n.cssSelectors,n.slots.length);if(i)for(var r in i){var d=i[r],l=n.slots[r],s=a(l);d.parentNode.insertBefore(s,d.nextSibling)}}}},99926:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(25547),o=n(6923);t.default=function(){try{var e=window.adService,t=(0,i.getConfig)();if(!t)return;var n=t.adConfig;window.adConfig=n;var a=t.videoAdConfig;window.videoAdConfig=a;var r=!1,d=n.contextTargetingEnabled;!function(){if(n.pageTargeting.URL=window.location.href,n.pageTargeting.UrlSegments=(0,i.getUrlSegments)(),n.pageTargeting.UriSegments=(0,i.getUriSegments)(),n.pageTargeting.cid=n.npiHash,d){var e=window.wk&&window.wk.ct?window.wk.ct.getSegments:null;if(e&&"function"==typeof e)e(window.location.href,(function(e){e&&(n.pageTargeting.gs_cat=e,r=!0)}),!1)}}();!function(){var t=[o.contextTargetingRule.bind(null,d,r),o.moatRule],i=(0,o.runDelayRules)(t);e.configure(n);var a=e.displayAds.bind(e);setTimeout(a,i.period)}()}catch(e){console.log("Error in adsInit: "+e.message)}}},29446:()=>{"use strict";var e=window.jQuery,t=void 0,n=void 0,i=function(e,t){return n.serverURL+"?correlator=[timestamp]&env=vp&gdfp_req=1&unviewed_position_start=1&output=vast&iu="+t+"&sz="+n.sizes+"&description_url="+encodeURIComponent(window.location.href)+"&url="+encodeURIComponent(window.location.href)+"&impl=s&cust_params="+encodeURIComponent(o(e))},o=function(n){if(t&&t.pageTargeting){var i="";for(var o in t.pageTargeting){var a=t.pageTargeting[o];if(Array.isArray(a)){for(var r="",d=0;d<a.length;d++)r+=d?",":"",r+=encodeURIComponent(a[d]);a=r}else a=encodeURIComponent(a);i+=i.length?"&":"",i+=o+"="+a}return void 0===t.pageTargeting.VideoName&&(i+=i.length?"&":"",i+="VideoName="+encodeURIComponent(e("[data-entry-id="+n.entry_id+"]").attr("data-videotitle"))),i}},a=function(e){if(e){var t=e.flashvars;t||(t=e.flashvars={});var n=t.vast;n||(n=t.vast={});var i=t.doubleClick;i||(i=t.doubleClick={}),i.adTagUrl=n.prerollUrl,n.prerollUrl=void 0}},r=function(e,t){if(e&&t){var n=e.readyCallback;e.readyCallback="function"==typeof n?function(e){n.call(this,e),t.call(this,e)}:t}};window.KalturaVideoAdConfig=function(o){o&&o.player&&o.ads&&(t=window.adConfig,n=window.videoAdConfig,o.ads.showOverlay&&function(e){if(e){var t=e.flashvars;t||(t=e.flashvars={});var o=t.vast;o||(o=t.vast={}),o.overlayUrl=i(e,n.overlayUnitPath),o.overlayStartAt="0",o.timeout="86400"}}(o.player),o.ads.showPreroll&&function(e){if(e){var t=e.flashvars;t||(t=e.flashvars={});var o=t.vast;o||(o=t.vast={}),o.prerollUrl=i(e,n.prerollUnitPath),a(e)}}(o.player),o.ads.showOverlay&&function(t){if(t){var n=function(t,n,i,o,a){if("overlay"===i){var r=e("#"+this.id+" iframe").contents(),d=this.id+"_overlay_btn_close_css_fix";r.find("html head style#"+d).length||r.find("html head").append(e('<style type="text/css" id="'+d+'" />').html(".mwPlayerContainer .videoHolder .btn.icon-close {   height: 1.5em !important;   width: 1.5em !important;   border-radius: .7em !important;   position: absolute !important;   top: -.75em !important;   right: -.75em !important;   line-height: 1.5em !important;   text-align: center !important;}"))}};r(t,(function(e){document.getElementById(e).kBind("onAdPlay",n)}))}}(o.player),o.ads.showPreroll&&(function(e){if(e){var t=e.flashvars;t||(t=e.flashvars={});var n=t.noticeMessage;n||(n=t.noticeMessage={}),n.text||(n.text="Advertisement {sequenceProxy.timeRemaining}");var i=t.skipBtn;i||(i=t.skipBtn={}),i.skipOffset||(i.skipOffset=5);var o=t.skipNotice;o||(o=t.skipNotice={}),o.text||(o.text="You can skip this ad in {sequenceProxy.skipOffsetRemaining}")}}(o.player),function(t){if(t){var n=function(t,n,i,o,a){if("overlay"!==i){var r=e("#"+this.id+" iframe").contents(),d=this.id+"_linear_ad_notice_css_fix";r.find("html head style#"+d).length||r.find("html head").append(e('<style type="text/css" id="'+d+'" />').html(".ad-component {   font-size: 11px !important;   line-height: 21px !important;}.ad-skip-btn {   font-size: 18px !important;}"))}};r(t,(function(e){document.getElementById(e).kBind("onAdPlay",n)}))}}(o.player)),function(e){if(e){var t=e.flashvars;if(t||(t=e.flashvars={}),t.autoPlay&&(window.performance.navigation.type!==window.performance.navigation.TYPE_NAVIGATE||0!==document.referrer.indexOf(location.protocol+"//"+location.host))){var n=window.MWEMBED_VERSION.split(".");n[0]>2||2==n[0]&&n[1]>=62||(t.autoMute=!0)}}}(o.player))}},88990:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.stickAds=function(e,t){var n=!0,i="stick-top",o=document.querySelector(".advertisement-content_top");if(o&&o.clientHeight/window.innerHeight<=.3){var a=o.clientHeight,r=function(){window.scrollY>a/2?n&&(o.classList.add(i),null!==document.querySelector(".header.fixed")&&"0px"===window.getComputedStyle(document.querySelector(".header.fixed")).top&&(document.querySelector(".header.fixed").style.top=o.offsetHeight.toString()+"px")):(o.classList.remove(i),null!==document.querySelector(".header.fixed")&&(document.querySelector(".header.fixed").style.top=""))};setTimeout((function(){n=!1,o.classList.remove(i),null!==document.querySelector(".header.fixed")&&(document.querySelector(".header.fixed").style.top=""),window.removeEventListener("scroll",r)}),t),r(),window.addEventListener("scroll",r)}}},6923:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.DelayRule=function(e,t){return{delay:e||!1,period:t||0}};t.moatRule=function(){var e=n();return window.moatPrebidApi&&window.moatPrebidApi.slotDataAvailable&&window.moatPrebidApi.slotDataAvailable()||(e=n(!0,1e3)),e},t.contextTargetingRule=function(e,t){var i=n();return e&&!t&&(i=n(!0,1e3)),i},t.runDelayRules=function(e){for(var t=n(),i=0;i<e.length;i++){var o=(0,e[i])();if(o&&o.delay){t=o;break}}return t}},25547:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.getUrlSegments=function(e){return(e=e||window.location.href).replace(/[:/?&=]/g," ").replace(/['=!#~;<>&\+\*\^\(\)\[\]\,\"_]/g," ").replace(/[ |\s]+/g," ")};t.getUriSegments=function(e){var t=[];try{e=e||window.location.href;var i=n(e);i&&(t=i.split(" "))}catch(e){window.console.error(e)}return t},t.getSlots=function(e,t,n){var i=document.querySelectorAll("div."+n);i&&i.length&&(i=[].slice.call(i)).map((function(n){var i=n,o=i.getAttribute("id");if(o){t.push(o);var a={};a.id=o,a.sizeMap=i.dataset.sizemap?JSON.parse(i.dataset.sizemap):[],a.refreshed=!1,a.adPath=i.dataset.adpath,a.autoLoad="yes"===i.dataset.autoload,a.outOfPage="yes"===i.dataset.outofpage,a.sticky="yes"===i.dataset.sticky,a.slotTargeting=i.dataset.slottargeting?JSON.parse(i.dataset.slottargeting):{},a.displaySlug="yes"===i.dataset.displayslug,e[o]=a}}))},t.getConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"js-ad-config",t=document.querySelector("."+e);if(!t)return null;var n=t.dataset.videoadconfig,i=t.dataset.adconfig;if(!i||!n)return null;var o={},a=JSON.parse(i);return a.pageTargeting=a.pageTargeting||{},o.adConfig=a,o.videoAdConfig=JSON.parse(n),o}},31013:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.isElementInViewport=function(e){if(!e)return!1;try{var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}catch(e){}},t.insertAdTitle=function(e,t,n){if(e){var i=e.parentNode.querySelector("."+t);i&&(i.textContent=n)}}},97869:(e,t,n)=>{"use strict";n(21665),n(29446);var i,o=n(99926);(0,((i=o)&&i.__esModule?i:{default:i}).default)()},27668:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setSlotTargeting=function(e,t){if(e){if(t)for(var n=Object.keys(t),i=0;i<n.length;i++)e.setTargeting(n[i],t[n[i]]);var o=o||window.moatPrebidApi;o&&o.slotDataAvailable&&o.slotDataAvailable()&&o.setMoatTargetingForSlot(e)}}}},e=>{"use strict";var t;t=97869,e(e.s=t)}]);
//# sourceMappingURL=ads.js.map