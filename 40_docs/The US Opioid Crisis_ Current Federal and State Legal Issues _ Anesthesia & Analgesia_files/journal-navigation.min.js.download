"use strict";var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JournalNavigation(){var t,n,i="js-dropdown-toggle";function s(e){if(e.children){var t='<li class="'+e.additionalClass+' dropdown">\n                    <a href="#" class="dropdown-toggle '+i+'" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">'+e.title+'<i class="fa"></i></a>\n                    <ul class="dropdown-menu">\n                        '+e.children.map(function(e){return function t(e){return'<li class="'+e.additionalClass+' dynamic">\n                 <a class="dynamic menu-item ms-core-listMenu-item ms-displayInline ms-navedit-linkNode" tabindex="0" href=" '+(e.url?e.url:"#")+'">\n                     <span class="additional-background ms-navedit-flyoutArrow">\n                         <span class="menu-item-text">'+e.title+"</span>\n                     </span>\n                 </a>\n                "+(e.children?'<ul class="">'+e.children.map(function(e){return t(e)}).join("")+"</ul>":"")+"\n                </li>"}(e)}).join("")+"\n                    </ul>\n                </li>";return i="",t}return'<li class="'+e.additionalClass+'">\n                    <a class="static menu-item ms-core-listMenu-item ms-displayInline ms-navedit-linkNode" tabindex="0" href="'+e.url+'">\n                        <span class="additional-background ms-navedit-flyoutArrow">\n                            <span class="menu-item-text">'+e.title+"</span>\n                        </span>\n                    </a>\n                </li>"}function o(e){var t=[];return $(e).children("li").each(function(){var e=function(e){for(var t={},n=0;n<e.children.length;n++){var i=e.children[n],s=e.children[n].tagName;"A"===s||"SPAN"===s?("A"===s&&(t.url=i.href),t.title=i.getElementsByClassName("menu-item-text")[0].textContent||"",t.additionalClass=i.getAttribute("title")||""):"UL"===s&&(t.children=o(e.children[n]))}return t}(this);t.push(e)}),t}function a(e){e?($(".main-nav-hover-overlay").addClass("main-nav-hover-overlay-hover"),$("#navActionButtons").css({display:"flex"})):($(".main-nav-hover-overlay").removeClass("main-nav-hover-overlay-hover"),$("#navActionButtons").css({display:"none"}))}this.init=function(){t=$('ul[id$="RootAspMenu"]'),n=o(t),function(){for($('div[id$="TopNavigationMenu"]').removeClass("noindex ms-core-listMenu-horizontalBox"),t.removeClass("root ms-core-listMenu-root static").addClass("nav navbar-nav");t.get(0).lastChild;)t.get(0).removeChild(t.get(0).lastChild);for(var e=0;e<n.length;e++)t.append(s(n[e]))}(),function(){var e=!1;$("#fatJuicy").on("click",function(){e=e?(a(!1),!1):(a(!0),!0)}),t.on("mouseover",function(){a(!0)}).on("mouseout",function(){!$("li.dropdown").hasClass("open")&&viewportWith()>=$lgMin&&a(!1)}),$("li.dropdown").on("addClass toggleClass removeClass",function(e,t,n){"removeClass"==e.type&&viewportWith()>=$lgMin&&a(!1)}),$("[id$=TopNavigationMenu]").on("shown.bs.collapse",function(e){$(".js-dropdown-toggle").dropdown("toggle","open")})}()}}var Sticky=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"init",value:function(){this._stickyBanner=document.querySelector(".top-banner"),this._stickyHeader=document.querySelector(".header"),this._mainContainer=document.querySelector("#main-container"),this._mainContainerContent=document.querySelector("#main-container-content"),this._sharePointMenu=document.querySelector("#ctl00_SharePointActionsContainer"),this._mainNavigation=document.querySelector("#main-nav"),this._stickySearchBtn=document.querySelector(".sticky-search"),this._stickySearch=document.querySelector(".search-v2"),this._topMicrobar=document.querySelector(".top-microbar-container"),this._headerLayoutBottom=document.querySelector(".header__layout-bottom"),this._userMenuPopupLogin=document.querySelector(".user-menu-popup--login"),this._userMenuLinkLogin=document.querySelector(".user-menu__link--login"),this._headerElements=[this._sharePointMenu,this._topMicrobar,this._stickyHeader],this._stickyHeightWithoutBanner=getStickyHeight(this._headerElements),this._stickyHeight=this._stickyHeightWithoutBanner,window.pageYOffset<=this._stickyHeightWithoutBanner?(this._scrolled=!0,this.handleUserScroll()):this._scrolled=!1,this._scrolled=!1,this._userPunishment=!0,window.addEventListener("scroll",this.handleUserScroll.bind(this)),window.addEventListener("resize",this.unstickOnMobile.bind(this)),this._stickySearchBtn.addEventListener("click",this.showSearchField.bind(this))}},{key:"handleUserScroll",value:function(){this._scrolled=!0,this.hideSearchField(),this._stickyHeight=this._stickyHeightWithoutBanner+this._stickyBanner.clientHeight,this._stickyPadding=this._stickyHeight-this._mainNavigation.clientHeight,window.pageYOffset<this._stickyHeight||window.innerWidth<768||0===window.pageYOffset?(this._stickyHeader.classList.remove("fixed"),this._mainContainerContent.style.paddingTop="",this._userMenuLinkLogin.parentNode.appendChild(this._userMenuPopupLogin)):(this._stickyHeader.classList.add("fixed"),this._mainContainerContent.style.paddingTop=this._stickyPadding+"px",this._mainContainer.appendChild(this._userMenuPopupLogin)),this.shiftStickyHeader()}},{key:"shiftStickyHeader",value:function(){var e=document.querySelector(".advertisement-content_top.top-banner.stick-top");null!==e&&this._stickyHeader.classList.contains("fixed")?this._stickyHeader.style.top=""+getComputedStyle(e).height:this._stickyHeader.style.top=""}},{key:"unstickOnMobile",value:function(){this.hideSearchField(),window.innerWidth<768&&(this._stickyHeader.classList.remove("fixed"),this._mainContainerContent.style.paddingTop="",this._userMenuLinkLogin.parentNode.appendChild(this._userMenuPopupLogin))}},{key:"unstickNavigation",value:function(){this._userPunishment=!1,this.hideSearchField(),this._scrolled?this._mainContainerContent.style.paddingTop=this._stickyHeight+"px":(this._stickyHeader.classList.remove("fixed"),this._mainContainerContent.style.paddingTop="")}},{key:"showSearchField",value:function(e){e.preventDefault(),this._stickySearchBtn.classList.toggle("active"),this._stickySearch.classList.toggle("active")}},{key:"hideSearchField",value:function(){this._stickySearchBtn.classList.remove("active"),this._stickySearch.classList.remove("active")}}]),e}(),getStickyHeight=function(e){return e.filter(function(e){return null!==e}).reduce(function(e,t){return e+checkHeight(t)},0)},checkHeight=function(e){return e.clientHeight||0},stickyInit=function(e){var t=document.querySelector(".advertisement-content_top"),n=document.querySelector(".header");t&&n&&new Sticky(e).init()};function addBackTopLinkClickListener(){var e=document.querySelector(".ejp-footer__back-to-top-link");e&&e.addEventListener("click",function(e){return e.preventDefault(),$("body,html").animate({scrollTop:0},1e3),!1})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",stickyInit):stickyInit(),document.addEventListener("DOMContentLoaded",addBackTopLinkClickListener);