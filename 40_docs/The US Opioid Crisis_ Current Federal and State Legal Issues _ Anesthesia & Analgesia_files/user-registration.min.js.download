"use strict";function FormField(e,i,t){function o(e){if(null!=n.error){n.error.html(""),n.error.removeClass("dn");var i=$("<div>").html(e).text();n.error.append(i)}}var n=this;this.container=e,this.control=i,this.error=t,this.validators=[],this.isValid=!1,this.validate=function(e,i){i=i||!1;var t=!0,a="";for(var s in n.validators){var r=n.validators[s].validate();if(r&&r.asyncValidationInProgress)return;r&&!r.isValid&&(t=r.isValid,a=r.errorMessage)}if(!t)return n.isValid=!1,void(e||(n.container.removeClass("valid"),n.container.addClass("notValid"),o(a)));n.isValid=!0,i||(n.container.removeClass("notValid"),n.container.addClass("valid")),null!=n.error&&(n.error.html(""),n.error.addClass("dn"))},this.showValidationStatus=function(e){n.isValid?(n.container.removeClass("notValid"),n.container.addClass("valid")):(n.container.removeClass("valid"),n.container.addClass("notValid")),o(e)},this.applyValidationResult=function(e){n.isValid&&e.isValid?o(""):(n.isValid=e.isValid,n.showValidationStatus(e.errorMessage))},this.showInfoMessage=function(e){n.container.removeClass("notValid").removeClass("valid"),o(e)}}function UserRegistrationFormBase(a){this.userRegistrationValidation=new UserRegistrationValidation(a.validationServiceEndpoint);function s(){var e=!0;for(var i in a.formFields)if(!IsFieldSelectedOrCheckedOrNotEmpty(a.formFields[i])){e=!1;break}return e}var r=this;r.messages={professtionRequired:"&lt;span class=&#39; red i b db mb3 &#39;&gt;You need to select a profession.&lt;/span&gt;",specialityRequired:"&lt;span class=&#39; red i b db mb3 &#39;&gt;You need to select a speciality.&lt;/span&gt;",workSettingRequired:"&lt;span class=&#39; red i b db mb3 &#39;&gt;You need to select a work setting.&lt;/span&gt;",firstNameReqired:"&lt;span class=&#39; red i b db mb3 &#39;&gt;You need to enter a first name.&lt;/span&gt;",lastNameReqired:"&lt;span class=&#39; red i b db mb3 &#39;&gt;You need to enter a last name.&lt;/span&gt;",zipCodeReqired:"&lt;span class=&#39; red i b db mb3 &#39;&gt;You need to enter a zip code.&lt;/span&gt;",emailEqualsPassword:"&lt;span class=&#39; red i b db mb3 &#39;&gt;Password must be different than your email.&lt;/span&gt;",regexpZipCode:"&lt;span class=&#39; red i b db mb3 &#39;&gt;Enter a valid zip code.&lt;/span&gt;",emailAddressReqired:"&lt;span class=&#39; red i b db mb3 &#39;&gt;You need to enter an email address.&lt;/span&gt;",regexpEmailAddress:"&lt;span class=&#39; red i b db mb3 &#39;&gt;This is not a valid email address, please try again.&lt;/span&gt;",passwordRequired:"&lt;span class=&#39; red i b db mb3&#39;&gt;You need to enter a password.&lt;/span&gt;"},r.updateSubmitButtonAvailability=function(){if(!s())return a.submitButton.hasClass("disabled")||a.submitButton.addClass("disabled"),void a.submitButton.removeClass("active");var e=!0;for(var i in a.formFields)a.formFields[i].isValid||(e=!1);e?(a.submitButton.hasClass("active")||a.submitButton.addClass("active"),a.submitButton.removeClass("disabled")):(a.submitButton.hasClass("disabled")||a.submitButton.addClass("disabled"),a.submitButton.removeClass("active"))},r.validateField=function(e){e.validate(),r.updateSubmitButtonAvailability()},a.formFields.profession.validators.push(new RequiredFieldValidator(a.formFields.profession,r.messages.professtionRequired)),a.formFields.profession.container.on("change",function(){r.validateField(a.formFields.profession)}),a.formFields.speciality.validators.push(new RequiredFieldValidator(a.formFields.speciality,r.messages.specialityRequired)),a.formFields.speciality.container.on("change",function(){r.validateField(a.formFields.speciality)}),a.formFields.workSetting.validators.push(new RequiredFieldValidator(a.formFields.workSetting,r.messages.workSettingRequired)),a.formFields.workSetting.container.on("change",function(){r.validateField(a.formFields.workSetting)});function e(e){32!==e.which&&13!==e.which||(e.preventDefault(),$(this).click())}function i(e){$(e.target).find(".user-registration__checkbox-wrap").focus()}var o;a.formFields.eula.validators.push(new RequiredFieldValidator(a.formFields.eula)),a.formFields.eula.control.on("change",function(){r.validateField(a.formFields.eula)}),a.formFields.privacy.container.find(".user-registration__checkbox-wrap").on("keypress",e),a.formFields.privacy.container.find("label").click(i),a.formFields.privacy.validators.push(new RequiredFieldValidator(a.formFields.privacy)),a.formFields.privacy.control.on("change",function(){r.validateField(a.formFields.privacy)}),a.formFields.eula.container.find(".user-registration__checkbox-wrap").on("keypress",e),a.formFields.eula.container.find("label").click(i),a.errorMessageContainer.find("[aria-label='close dialog']").on("click",function(){clearPostLoginAction(),a.errorMessageContainer.hide()}),a.submitButton.on("click",function(e){if(!s())return a.submitButton.hasClass("disabled")||a.submitButton.addClass("disabled"),a.submitButton.removeClass("active"),e.preventDefault(),void e.stopPropagation();var i=!0;for(var t in a.formFields)a.formFields[t].showValidationStatus(),a.formFields[t].isValid||(i=!1);if(i)return a.submitButton.addClass("disabled"),a.submitButton.unbind("click"),a.submitButton.on("click",function(e){e.preventDefault(),e.stopPropagation()}),void ejpAnalytics.track("Create Account");e.preventDefault(),e.stopPropagation()}),isMobileDevice()&&!navigator.userAgent.match(/iPad/i)||function(){o=a.formContainer.find(".user-registration__ddl-selectize").selectize({selectOnTab:!0}),a.formContainer.find(".user-registration__ddl-selectize").find("input").attr("readonly",!0);for(var i=["profession","speciality","workSetting"],e=function(e){o[e].selectize.on("blur",function(){r.validateField(a.formFields[i[e]])})},t=0;t<o.length;t++)e(t)}()}function UserRegistrationForm(t){var e=800,a=new UserRegistrationFormBase(t);t.formFields.firstName.validators.push(new RequiredFieldValidator(t.formFields.firstName,a.messages.firstNameReqired)),t.formFields.firstName.control.on("input",debounce(function(){a.validateField(t.formFields.firstName)},e)),t.formFields.lastName.validators.push(new RequiredFieldValidator(t.formFields.lastName,a.messages.lastNameReqired)),t.formFields.lastName.control.on("input",debounce(function(){a.validateField(t.formFields.lastName)},e)),t.formFields.zipCode.validators.push(new RequiredFieldValidator(t.formFields.zipCode,a.messages.zipCodeReqired)),t.formFields.zipCode.control.on("input",debounce(function(){a.validateField(t.formFields.zipCode)},e));function i(){var e=t.formFields.email.control.val(),i=t.formFields.password.control.val();return""!==e&&i.toLowerCase()===e.toLowerCase()?new ValidationResult(!1,a.messages.emailEqualsPassword):new ValidationResult(!0)}function s(e){disableSubmitButtonOnError(e,t),t.formFields.password.applyValidationResult(e)}function r(e){t.formFields.password.showInfoMessage(e)}t.formFields.password.validators.push(new RequiredFieldCustomValidator(function(){var e=i();if(!e.isValid)return e;a.userRegistrationValidation.validatePassword(t.formFields.password.control.val(),t.formFields.email.control.val(),s)},t.formFields.password,a.messages.passwordRequired)),t.formFields.password.control.on("input",debounce(function(){a.validateField(t.formFields.password)},e)),t.formFields.password.control.on("focusin",function(){a.userRegistrationValidation.getPasswordStrengthSuggestion(r)});function o(e){disableSubmitButtonOnError(e,t),t.formFields.email.applyValidationResult(e)}t.formFields.email.validators.push(new RequiredFieldCustomValidator(function(){i(),a.userRegistrationValidation.validateEmailAddress(t.formFields.email.control.val(),o),""!==t.formFields.password.control.val()&&a.validateField(t.formFields.password)},t.formFields.email,a.messages.emailAddressReqired)),t.formFields.email.control.on("input",debounce(function(){a.validateField(t.formFields.email)},e)),this.init=function(){for(var e in"page"===t.type&&(formSource="Landing Page",ejpAnalytics.track("Registration Initiation")),t.submitButton.addClass("disabled"),t.formFields){t.formFields[e].validate(!0)}t.errorMessageContainer.hide()}}function CompleteUserRegistrationForm(i){new UserRegistrationFormBase(i);this.init=function(){for(var e in"complete"===i.type&&(formSource="Complete Registration Page",ejpAnalytics.track("Registration Initiation")),i.submitButton.addClass("disabled"),i.formFields){i.formFields[e].validate(!0,!0)}}}function disableSubmitButtonOnError(e,i){e.isValid||i.submitButton.hasClass("disabled")||i.submitButton.addClass("disabled")}function debounce(t,a){var s;return function(){var e=arguments,i=this;clearTimeout(s),s=setTimeout(function(){t.apply(i,e)},a)}}function IsFieldSelectedOrCheckedOrNotEmpty(e){var i=e.control.prop("tagName").toLowerCase();if("input"!==i)return"select"!==i||"-1"!==e.container.find(":selected").val();var t=e.control.attr("type");return"checkbox"===t?e.control.is(":checked"):"text"!==t&&"email"!==t&&"password"!==t||""!==e.control.val().trim()}function ValidationResult(e,i){return{isValid:e,errorMessage:i,asyncValidationInProgress:2<arguments.length&&void 0!==arguments[2]&&arguments[2]}}function RequiredFieldValidator(e,i){var t=this;this.field=e,this.errorMessage=i,this.validate=function(){var e=t.field.control.prop("tagName").toLowerCase();if("input"!==e)return"select"!==e?new ValidationResult(!0):new ValidationResult("-1"!==t.field.container.find(":selected").val(),t.errorMessage);var i=t.field.control.attr("type");return"checkbox"===i?new ValidationResult(t.field.control.is(":checked")):("text"===i||"email"===i||"password"===i)&&""===t.field.control.val().trim()?new ValidationResult(!1,t.errorMessage):new ValidationResult(!0)}}function RequiredFieldCustomValidator(i,e,t){var a=this;this.field=e,this.requiredMessage=t,this.validate=function(){var e=new RequiredFieldValidator(a.field,a.requiredMessage).validate();return e.isValid?(i(),new ValidationResult(!0,"",!0)):e}}function UserRegistrationValidation(e){var r=e,t="";return{validateEmailAddress:function(e,i){!function(e,a){var i=r+"/IsEmailAddressValid?emailAddress="+encodeURIComponent(e);$.ajax({url:i,type:"GET",async:!0,success:function(e){a(e?new ValidationResult(e.IsValid,e.ErrorMessage):new ValidationResult(!1,"The service is irresponsible, please try again later."))},error:function(e,i,t){a(new ValidationResult(!1,"The service is irresponsible, please try again later.")),console.error("The service is irresponsible. Status: "+i+". Error: "+t)}})}(e,i)},validatePassword:function(e,i,t){!function(e,i,a){var t=r+"/IsPasswordValid",s={password:e,emailAddress:i};$.ajax({url:t,type:"POST",data:JSON.stringify(s),contentType:"application/json",dataType:"json",processData:!0,async:!0,success:function(e){a(e?new ValidationResult(e.IsValid,e.ErrorMessage):new ValidationResult(!1,"The service is irresponsible, please try again later."))},error:function(e,i,t){a(new ValidationResult(!1,"The service is irresponsible, please try again later.")),console.error("The service is irresponsible. Status: "+i+". Error: "+t)}})}(e,i,t)},getPasswordStrengthSuggestion:function(e){!function(i){if(""===t){var e=r+"/GetPasswordStrengthSuggestion";$.ajax({url:e,type:"GET",async:!0,success:function(e){e&&i(t=e)},error:function(e,i,t){console.error("The service is irresponsible. Status: "+i+". Error: "+t)}})}else i(t)}(e)}}}function showDefaultLoginPopup(e){var i=getPopupDataFromSource(e);return showLoginPopupIfRequired(i.isUserLoggedIn,i.isMobileMode,i.hasAlternativeAccountLinks,i.redirectPageUrl,function(){},PostLoginAction.Default,!0)}function showDefaultRegisterPopup(e){var i=getPopupDataFromSource(e);return showRegisterPopupIfRequired(i.isUserLoggedIn,i.isMobileMode,i.hasAlternativeAccountLinks,i.redirectPageUrl,function(){},PostLoginAction.Default,!0)}function getPopupDataFromSource(e){var i=null;if(e&&e.target){var t=e.target,a=t.getAttribute("data-is-user-logged-in")||"",s=t.getAttribute("data-has-alternative-account-links")||"",r=t.getAttribute("data-is-mobile-mode")||"";i={isUserLoggedIn:"true"===a.toLowerCase(),hasAlternativeAccountLinks:"true"===s.toLowerCase(),redirectPageUrl:t.getAttribute("data-redirect-page-url"),isMobileMode:"true"===r.toLowerCase()}}return i}window.addEventListener("DOMContentLoaded",function(e){var i=document.querySelectorAll(".js-section-register-login-link"),t=[],a=[];if(i){for(var s=0;s<i.length;s++){var r=i[s];t.push(r.querySelector(".js-default-register-link")),a.push(r.querySelector(".js-default-login-link"))}t.forEach(function(e){e.addEventListener("click",function(e){showDefaultRegisterPopup(e),e.stopPropagation(),e.preventDefault()})}),a.forEach(function(e){e.addEventListener("click",function(e){showDefaultLoginPopup(e),e.stopPropagation(),e.preventDefault()})})}});